<% layout("layouts/boilerplate") %>
<div class="row">
  <div class="col-8 offset-2">
    <br><br>
    <h3>Create Employee</h3>
    
    <form id="employeeForm" method="POST" action="/listings" novalidate class="needs-validation">
      
     <!-- Name Field -->
      <div class="md-3">
        <label for="name" class="form-label">Name</label>
        <input name="listing[name]" placeholder="Enter your name" type="text" class="form-control" required minlength="3"/>
        <div class="invalid-feedback">Please Enter Name (at least 3 characters)</div>
      </div>

      <!-- Email Field -->
      <div class="md-3">
        <label for="email" class="form-label">Email</label>
        <input name="listing[email]" placeholder="Enter your email" type="email" class="form-control" required/>
        <div class="invalid-feedback">Please Enter a valid Email</div>
      </div>

      <!-- Mobile Number Field -->
      <div class="md-3">
        <label for="mobile" class="form-label">Mobile Number</label>
        <input name="listing[mobile]" placeholder="Enter mobile number" type="tel" class="form-control" required pattern="^\d{10}$"/>
        <div class="invalid-feedback">Please Enter a valid 10-digit Mobile Number</div>
      </div>

      <!-- Designation Field (Dropdown) -->
      <div class="md-3">
        <label for="designation" class="form-label">Designation</label>
        <select name="listing[designation]" class="form-select" required>
          <option value="">Select Designation</option>
          <option value="Manager">Manager</option>
          <option value="HR">HR</option>
          <option value="Sales">Sales</option>
        </select>
        <div class="invalid-feedback">Please Select Designation</div>
      </div>

      <!-- Gender Field (Radio Buttons) -->
      <div class="md-3">
        <label class="form-label">Gender</label>
        <div class="form-check">
          <input type="radio" name="listing[gender]" value="Male" class="form-check-input" required />
          <label class="form-check-label" for="genderMale">Male</label>
        </div>
        <div class="form-check">
          <input type="radio" name="listing[gender]" value="Female" class="form-check-input" required />
          <label class="form-check-label" for="genderFemale">Female</label>
        </div>
        <div class="form-check">
          <input type="radio" name="listing[gender]" value="Other" class="form-check-input" required />
          <label class="form-check-label" for="genderOther">Other</label>
        </div>
        <div class="invalid-feedback">Please Select Gender</div>
      </div>

      <!-- Course Field (Checkboxes) -->
      <div class="md-3">
        <label class="form-label">Courses</label><br />
        <div class="form-check">
          <input type="checkbox" name="listing[course][]" value="MCA" class="form-check-input" />
          <label class="form-check-label" for="courseMCA">MCA</label>
        </div>
        <div class="form-check">
          <input type="checkbox" name="listing[course][]" value="BCA" class="form-check-input" />
          <label class="form-check-label" for="courseBCA">BCA</label>
        </div>
        <div class="form-check">
          <input type="checkbox" name="listing[course][]" value="BSC" class="form-check-input" />
          <label class="form-check-label" for="courseBSC">BSC</label>
        </div>
        <div class="invalid-feedback">Please Select at least one course</div>
      </div>

      <!-- Image Upload -->
      <div class="md-3">
        <label for="img" class="form-label">Upload Image</label>
        <input name="listing[img]" type="file" class="form-control" accept="image/*"/>
      </div>

      <br /><br />
      <button class="btn btn-dark add-btn" type="submit">Add</button>
      <br><br>
    </form>
  </div>
</div>

<script>
// Custom validation
document.getElementById('employeeForm').addEventListener('submit', function (event) {
  event.preventDefault(); // Prevent form submission
  if (this.checkValidity()) {
    // If all fields are valid, submit the form
    this.submit();
  } else {
    // If not valid, trigger Bootstrap's invalid feedback
    this.classList.add('was-validated');
  }
});

// Custom checkbox validation: Ensure at least one checkbox is selected
document.querySelector('form').addEventListener('submit', function (e) {
  const checkboxes = document.querySelectorAll('input[name="listing[courses][]"]:checked');
  if (checkboxes.length === 0) {
    e.preventDefault();
    alert('Make sure you fill correctly.');
  }
});
</script>
